
# This file was generated by the Tkinter Designer by Parth Jadhav
# https://github.com/ParthJadhav/Tkinter-Designer


from pathlib import Path
import moviepy.editor as moviepy
import os

# from tkinter import *
# Explicit imports to satisfy Flake8
from tkinter import Tk, Canvas, Entry, Text, Button, PhotoImage, filedialog, StringVar

OUTPUT_PATH = Path(__file__).parent
ASSETS_PATH = OUTPUT_PATH / Path("./assets")

selectedFormat = ""
filePath = ""


def relative_to_assets(path: str) -> Path:
    return ASSETS_PATH / Path(path)

window = Tk()

window.geometry("431x435")
window.configure(bg = "#3A7FF6")
window.title("Video Converter")

#########################
#Variables
#########################
selected = "#A3EF9B"
fileEntryText = StringVar()
formatEntryText = StringVar()
#########################
#Functions
#########################

# File Location
def open_file():
    file = filedialog.askopenfile(mode='r')
    filePath = str(file).split("'")
    filePath = str(filePath[1])
    print(filePath)
    fileEntryText.set(value=filePath)

# Video Converter
def convertVideo():
    FORMAT = formatEntryText.get()
    PATH = filePathEntry.get()
    NEWFILE = "convertedMovie" + FORMAT

    print(formatEntryText.get())
    print(filePathEntry.get())
    print(NEWFILE)

    clip = moviepy.VideoFileClip(PATH)
    clip.write_videofile(NEWFILE)

# Selected Format
def changeFormatWebm():
    selectedFormat = ".webm"
    print(selectedFormat)
    formatEntryText.set(selectedFormat)
    webmConvertButton.config(bg=selected)

def changeFormatMp4():
    selectedFormat = ".mp4"
    print(selectedFormat)
    formatEntryText.set(selectedFormat)
    mp4ConvertButton.config(bg=selected)

def changeFormatWmv():
    selectedFormat = ".wmv"
    print(selectedFormat)
    formatEntryText.set(selectedFormat)
    wmvConvertButton.config(bg=selected)

def changeFormatAvi():
    selectedFormat = ".avi"
    print(selectedFormat)
    formatEntryText.set(selectedFormat)
    aviConvertButton.config(bg=selected)

#########################
#GUI INTERFACE
#########################



canvas = Canvas(
    window,
    bg = "#3A7FF6",
    height = 435,
    width = 431,
    bd = 0,
    highlightthickness = 0,
    relief = "ridge"
)

canvas.place(x = 0, y = 0)
canvas.create_rectangle(
    0.0,
    0.0,
    431.0,
    435.0,
    fill="#FCFCFC",
    outline="")

generateImage = PhotoImage(
    file=relative_to_assets("button_1.png"))
generateButton = Button(
    image=generateImage,
    borderwidth=0,
    highlightthickness=0,
    command=convertVideo,
    relief="flat"
)
generateButton.place(
    x=126.0,
    y=358.0,
    width=180.0,
    height=55.0
)

filePathImage = PhotoImage(
    file=relative_to_assets("entry_1.png"))
filePathBackground = canvas.create_image(
    219.5,
    293.5,
    image=filePathImage
)
filePathEntry = Entry(
    bd=0,
    textvariable=fileEntryText,
    bg="#F1F5FF",
    highlightthickness=0
)
filePathEntry.place(
    x=59.0,
    y=263.0,
    width=321.0,
    height=59.0
)

fileFormatEntry = Entry(
    bd=0,
    textvariable=formatEntryText,
    bg="#F1F5FF",
    highlightthickness=0
)

filepathButtonImage = PhotoImage(
    file=relative_to_assets("button_2.png"))
filePathButton = Button(
    image=filepathButtonImage,
    borderwidth=0,
    highlightthickness=0,
    command=open_file,
    relief="flat"
)
filePathButton.place(
    x=352.0,
    y=283.0,
    width=24.0,
    height=22.0
)

webmConvertImage = PhotoImage(
    file=relative_to_assets("button_3.png"))
webmConvertButton = Button(
    image=webmConvertImage,
    borderwidth=0,
    highlightthickness=0,
    command=changeFormatWebm,
    relief="flat"
)
webmConvertButton.place(
    x=246.0,
    y=176.0,
    width=146.0,
    height=55.0
)

mp4ConvertImage = PhotoImage(
    file=relative_to_assets("button_4.png"))
mp4ConvertButton = Button(
    image=mp4ConvertImage,
    borderwidth=0,
    highlightthickness=0,
    command=changeFormatMp4,
    relief="flat"
)
mp4ConvertButton.place(
    x=47.0,
    y=176.0,
    width=146.0,
    height=55.0
)

wmvConvertImage = PhotoImage(
    file=relative_to_assets("button_5.png"))
wmvConvertButton = Button(
    image=wmvConvertImage,
    borderwidth=0,
    highlightthickness=0,
    command=changeFormatWmv,
    relief="flat"
)
wmvConvertButton.place(
    x=246.0,
    y=87.0,
    width=146.0,
    height=55.0
)

aviConvertImage = PhotoImage(
    file=relative_to_assets("button_6.png"))
aviConvertButton = Button(
    image=aviConvertImage,
    borderwidth=0,
    highlightthickness=0,
    command=changeFormatAvi,
    relief="flat"
)
aviConvertButton.place(
    x=47.0,
    y=87.0,
    width=146.0,
    height=55.0
)

canvas.create_text(
    47.0,
    26.0,
    anchor="nw",
    text="Video Converter",
    fill="#505485",
    font=("Roboto Bold", 24 * -1)
)
window.resizable(False, False)
window.mainloop()
